<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Exponential Fade Demo</title>
<style></style>
</head>
<body>
  
  <div id=play>Play</div>
  <div id=stop>Stop</div>

<script type="text/javascript">
(function(){
  
    /*
        Test script to demonstrate an exponential fade.
    */
    var ctx = new webkitAudioContext(), 
        url = '../media/Tangerine.mp3',
        audio = new Audio(url),  
        gainNode = ctx.createGain(),
        source,
        start,
        end;

        audio.addEventListener('progress', function(e){
            var x;

        }, false);

        audio.addEventListener('canplaythrough', function(){
            source = ctx.createMediaElementSource(audio);
            source.connect(gainNode);
            gainNode.connect(ctx.destination);

            start = ctx.currentTime,
            end = start + 3;

            gainNode.gain.exponentialRampToValueAtTime(0.01, start);
            gainNode.gain.exponentialRampToValueAtTime(1, 3, end);
            
            audio.play();
        }, false);  
  
})();
</script>
</body>
</html>
